<odoo>
    <data>
        <!-- Define the action for Viaggi -->
        <record id="action_viaggi" model="ir.actions.act_window">
            <field name="name">Viaggi</field>
            <field name="res_model">tms.trip</field>
            <field name="view_mode">list,form,kanban,pivot</field>
            <field name="groups_id" eval="[(4, ref('group_tms_manager')), (4, ref('group_tms_demo_visitors')), (4, ref('base.group_system'))]"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">Create your first trip</p>
            </field>
        </record>

        <!-- Define the action for Tipo Viaggi (Trip Type) -->
        <record id="action_anagrafica" model="ir.actions.act_window">
            <field name="name">Tipo Viaggi</field>
            <field name="res_model">tms.trip.type</field>
            <field name="view_mode">list,form</field>
            <field name="groups_id" eval="[(4, ref('group_tms_manager')), (4, ref('group_tms_demo_visitors')), (4, ref('base.group_system'))]"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">Create your trip types</p>
            </field>
        </record>

        <!-- Action to view Stops -->
        <record id="action_view_stops" model="ir.actions.act_window">
            <field name="name">Stops</field>
            <field name="res_model">tms.stop</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('trip_id', '=', active_id)]</field>
            <field name="context">{'default_trip_id': active_id}</field>
            <field name="groups_id" eval="[(4, ref('group_tms_manager')), (4, ref('group_tms_demo_visitors')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- Action for viewing Trip Type List -->
        <record id="action_tms_trip_type" model="ir.actions.act_window">
            <field name="name">Tipo Viaggi</field>
            <field name="res_model">tms.trip.type</field>
            <field name="view_mode">list,form</field>
            <field name="groups_id" eval="[(4, ref('group_tms_manager')), (4, ref('group_tms_demo_visitors')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- Action to view Trips -->
        <record id="action_view_trips" model="ir.actions.act_window">
            <field name="name">Trips</field>
            <field name="res_model">tms.trip</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('trip_type_id', '=', active_id)]</field>
            <field name="context">{'default_trip_type_id': active_id}</field>
            <field name="groups_id" eval="[(4, ref('group_tms_manager')), (4, ref('group_tms_demo_visitors')), (4, ref('base.group_system'))]"/>
        </record>

        <!-- Manager Group -->
        <record id="group_tms_manager" model="res.groups">
            <field name="name">Manager</field>
            <field name="category_id" ref="base.module_category_services"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <!-- Demo Visitors Group -->
        <record id="group_tms_demo_visitors" model="res.groups">
            <field name="name">Demo Visitors</field>
            <field name="category_id" ref="base.module_category_services"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <!-- Access Rights for tms.trip Model for Services/Manager Group -->
        <record id="access_tms_trip_manager" model="ir.model.access">
            <field name="name">tms.trip.manager</field>
            <field name="model_id" ref="model_tms_trip"/>
            <field name="group_id" ref="group_tms_manager"/>
            <field name="perm_read">1</field>
            <field name="perm_write">1</field>
            <field name="perm_create">1</field>
            <field name="perm_unlink">1</field>
        </record>

        <!-- Access Rights for tms.trip Model for Admin Group -->
        <record id="access_tms_trip_manager_admin" model="ir.model.access">
            <field name="name">tms.trip.manager.admin</field>
            <field name="model_id" ref="model_tms_trip"/>
            <field name="group_id" ref="base.group_system"/>
            <field name="perm_read">1</field>
            <field name="perm_write">1</field>
            <field name="perm_create">1</field>
            <field name="perm_unlink">1</field>
        </record>

        <!-- Access Rights for tms.stop Model for Services/Manager Group -->
        <record id="access_tms_stop_manager" model="ir.model.access">
            <field name="name">tms.stop.manager</field>
            <field name="model_id" ref="model_tms_stop"/>
            <field name="group_id" ref="group_tms_manager"/>
            <field name="perm_read">1</field>
            <field name="perm_write">1</field>
            <field name="perm_create">1</field>
            <field name="perm_unlink">1</field>
        </record>

        <!-- Access Rights for tms.stop Model for Admin Group -->
        <record id="access_tms_stop_manager_admin" model="ir.model.access">
            <field name="name">tms.stop.manager.admin</field>
            <field name="model_id" ref="model_tms_stop"/>
            <field name="group_id" ref="base.group_system"/>
            <field name="perm_read">1</field>
            <field name="perm_write">1</field>
            <field name="perm_create">1</field>
            <field name="perm_unlink">1</field>
        </record>
        <!-- Access Rights for tms.trip.type Model for Services/Manager Group -->
        <record id="access_tms_trip_type_manager" model="ir.model.access">
            <field name="name">tms.trip.type.manager</field>
            <field name="model_id" ref="model_tms_trip_type"/>
            <field name="group_id" ref="group_tms_manager"/>
            <field name="perm_read">1</field>
            <field name="perm_write">1</field>
            <field name="perm_create">1</field>
            <field name="perm_unlink">1</field>
        </record>

        <!-- Access Rights for tms.trip.type Model for Admin Group -->
        <record id="access_tms_trip_type_admin" model="ir.model.access">
            <field name="name">tms.trip.type.admin</field>
            <field name="model_id" ref="model_tms_trip_type"/>
            <field name="group_id" ref="base.group_system"/>
            <field name="perm_read">1</field>
            <field name="perm_write">1</field>
            <field name="perm_create">1</field>
            <field name="perm_unlink">1</field>
        </record>

        <!-- Independent Parent Menu Items -->
        <!-- Menu for Viaggi -->
        <menuitem id="menu_viaggi" name="Viaggi" sequence="10" action="action_viaggi" groups="group_tms_manager,group_tms_demo_visitors,base.group_system"/>

        <!-- Parent Menu for Configuration -->
        <menuitem id="menu_configurazione" name="Configurazione" sequence="30" groups="group_tms_manager,group_tms_demo_visitors,base.group_system"/>

        <!-- Menu for Anagrafiche (Trip Types) -->
        <menuitem id="menu_anagrafiche" name="Anagrafiche" sequence="20" action="action_anagrafica" groups="group_tms_manager,group_tms_demo_visitors,base.group_system"/>

        <!-- Menu for Tipo Viaggi (Trip Type) under Anagrafiche -->
        <menuitem id="menu_tms_trip_type" name="Tipo Viaggi" parent="menu_anagrafiche" sequence="2" action="action_tms_trip_type" groups="group_tms_manager,group_tms_demo_visitors,base.group_system"/>
    </data>
</odoo>
